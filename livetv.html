<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>iWatchTV — Persistent Random Movie Player</title>
<style>
:root { --ui-hide-time: 18000ms; }
html, body { margin:0; padding:0; width:100%; height:100%; background:#000; font-family:Arial,sans-serif; overflow:hidden; }
.player-shell { position:fixed; inset:0; display:flex; justify-content:center; align-items:center; background:#000; z-index:99999; }
.player { position:relative; width:100%; height:100%; overflow:hidden; }
video { position:absolute; inset:0; width:100%; height:100%; background:#000; object-fit:cover; display:block; }

.btn {
  position:absolute; z-index:60; border:none;
  background:rgba(255,255,255,0.16); color:#fff;
  padding:6px 8px; border-radius:6px; cursor:pointer;
  font-size:13px; transition:opacity .25s, transform .12s;
}
.btn:active { transform:scale(.98); }

#fullscreenBtn { right:12px; bottom:12px; }
#stretchBtn { left:12px; bottom:12px; }



.play-overlay {
  position:absolute; left:50%; top:50%;
  transform:translate(-50%,-50%);
  width:96px; height:96px; border-radius:50%;
  background:rgba(0,0,0,.55);
  color:white; font-size:46px;
  display:flex; align-items:center; justify-content:center;
  z-index:70; cursor:pointer;
}

.top-logo, .bottom-logo {
  position:absolute; z-index:55; width:56px; height:56px;
}
.top-logo { top:12px; right:48px; }
.bottom-logo { bottom:12px; right:48px; }

#videoTitle {
  position:absolute; top:12px; left:60px; z-index:65;
  padding:6px 10px; background:rgba(0,0,0,0.4);
  border-radius:4px; font-size:14px; font-weight:700;
  letter-spacing:.5px; display:none;
  text-shadow:0 0 4px rgba(0,0,0,.7);
}

.hidden { opacity:0; visibility:hidden; pointer-events:none; }
</style>
</head>
<body>

<div class="player-shell" id="playerShell">
  <div class="player">
    <video id="mainVideo" playsinline muted></video>

    <div id="playOverlay" class="play-overlay">▶</div>

    

    <button id="fullscreenBtn" class="btn">⛶</button>
    <button id="stretchBtn" class="btn">Stretch</button>

    <div class="top-logo" id="topLogo">
      <img src="https://i.imgur.com/6ZNfQhA.png" style="width:100%;height:100%;object-fit:contain">
    </div>

    <div class="bottom-logo" id="bottomLogo">
      <img src="https://i.imgur.com/TxrZY6S.png" style="width:100%;height:100%;object-fit:contain">
    </div>

    <div id="videoTitle"></div>
  </div>
</div>

<script>
const mainV = document.getElementById("mainVideo");
const playOverlay = document.getElementById("playOverlay");
const fullscreenBtn = document.getElementById("fullscreenBtn");
const stretchBtn = document.getElementById("stretchBtn");
const closeBtn = document.getElementById("closeBtn");
const topLogo = document.getElementById("topLogo");
const bottomLogo = document.getElementById("bottomLogo");
const videoTitle = document.getElementById("videoTitle");
const playerShell = document.getElementById("playerShell");

let uiHideTimer = null;
let isStretched = false;


const moviesList = [
  { src:"https://videos.gia.tv/giatv/movies/playlist/210938/A_secret__affair__2019_full_movie_lovestory.mp4", title:"A Secret Affair"},
  { src:"https://videos.gia.tv/giatv/movies/playlist/210938/Bad_Boy_2_FULL_MOVIE_HD__Robin_Padilla__Dennis_Padilla___VIVA_Films__720p__h264_.mp4", title:"Bad Boy"},
  { src:"https://videos.gia.tv/giatv/movies/playlist/210938/FILIPINO_TAGALOG_MOVIES_Always.mp4", title:"Always"}
];

function shuffle(arr){
  let a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    let j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

let sequence = localStorage.getItem("movie_sequence")
  ? JSON.parse(localStorage.getItem("movie_sequence"))
  : shuffle(moviesList);

let seqIndex = parseInt(localStorage.getItem("movie_index") || "0");

function saveState(){
  localStorage.setItem("movie_sequence", JSON.stringify(sequence));
  localStorage.setItem("movie_index", seqIndex);
}

function playNext(){
  if(seqIndex >= sequence.length){
    sequence = shuffle(moviesList);
    seqIndex = 0;
  }

  let item = sequence[seqIndex];

  mainV.src = item.src;
  mainV.muted = false;
  mainV.play().catch(()=>{});

  topLogo.style.display = "block";
  bottomLogo.style.display = "block";

  videoTitle.textContent = item.title;
  videoTitle.style.display = "block";

  seqIndex++;
  saveState();
}

mainV.addEventListener("ended", playNext);

playOverlay.addEventListener("click", ()=>{
  mainV.muted = false;
  mainV.play();
  playOverlay.style.display = "none";
  resetUI();
});

fullscreenBtn.addEventListener("click", async ()=>{
  if(!document.fullscreenElement)
    await document.documentElement.requestFullscreen();
  else
    await document.exitFullscreen();
  resetUI();
});

stretchBtn.addEventListener("click", ()=>{
  isStretched = !isStretched;
  mainV.style.objectFit = isStretched ? "fill" : "cover";
  resetUI();
});


closeBtn.addEventListener("click", ()=>{
  playerShell.style.display = "none";
});

function resetUI(){
  [fullscreenBtn, stretchBtn, closeBtn].forEach(el=>el.classList.remove("hidden"));
  clearTimeout(uiHideTimer);

  uiHideTimer = setTimeout(()=>{
    [fullscreenBtn, stretchBtn, closeBtn].forEach(el=>el.classList.add("hidden"));
  }, 18000);
}

["mousemove","click","touchstart","keydown"].forEach(evt=>{
  window.addEventListener(evt, resetUI);
});

(function init(){
  playNext();
  resetUI();
})();
</script>

</body>
</html>
